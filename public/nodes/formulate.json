{
  "type": "formulate",
  "label": "Formulate",
  "category": "analysis",
  "icon": "flask",
  "color": "purple",
  "description": "Analyze and deformulate product compositions",
  "defaultInputs": [],
  "defaultOutputs": [
    {
      "id": "id",
      "name": "id",
      "type": "string",
      "description": "Ingredient ID"
    },
    {
      "id": "inci",
      "name": "inci",
      "type": "string",
      "description": "INCI name"
    },
    {
      "id": "functions",
      "name": "functions",
      "type": "array",
      "description": "Ingredient functions"
    },
    {
      "id": "estimatedPercent",
      "name": "Estimated Percent",
      "type": "string",
      "description": "Estimated percentage"
    }
  ],
  "configSchema": [
    {
      "key": "inputSource",
      "type": "select",
      "label": "Input Source",
      "description": "Choose how you want to provide formula data",
      "options": [
        { "label": "Free Text / Manual Entry", "value": "manual" },
        { "label": "Upload Ingredient List", "value": "file" },
        { "label": "Reference Product (Link/Name)", "value": "reference" }
      ],
      "defaultValue": "manual"
    },
    {
      "key": "formulaContent",
      "type": "string",
      "label": "Formula/Ingredient Description",
      "placeholder": "Enter ingredients manually or describe your target formula...",
      "visibleIf": { "inputSource": "manual" }
    },
    {
      "key": "attachment",
      "type": "file",
      "label": "Upload File",
      "visibleIf": { "inputSource": "file" }
    },
    {
      "key": "referenceData",
      "type": "string",
      "label": "Product Reference",
      "placeholder": "Paste product link or enter product name...",
      "visibleIf": { "inputSource": "reference" }
    },
    {
      "key": "desiredEffect",
      "type": "string",
      "label": "Desired Effect",
      "placeholder": "e.g. Whitening, Moisturizing, Acne treatment...",
      "required": true
    },
    {
      "key": "targetUser",
      "type": "select",
      "label": "Target User",
      "required": true,
      "options": [
        { "label": "Baby", "value": "baby" },
        { "label": "Under 18", "value": "under_18" },
        { "label": "18 - 30", "value": "18_30" },
        { "label": "Middle-aged", "value": "middle_aged" },
        { "label": "Elderly", "value": "elderly" }
      ]
    },
    {
      "key": "targetMarket",
      "type": "select",
      "label": "Target Market",
      "options": [
        { "label": "Asia", "value": "asia" },
        { "label": "Europe", "value": "europe" },
        { "label": "North America", "value": "north_america" },
        { "label": "South America", "value": "south_america" },
        { "label": "Africa", "value": "africa" },
        { "label": "Oceania", "value": "oceania" }
      ]
    },
    {
      "key": "applicationRoute",
      "type": "select",
      "label": "Application Route",
      "options": [
        { "label": "Oral", "value": "oral" },
        { "label": "Dental", "value": "dental" },
        { "label": "Topical", "value": "topical" }
      ]
    },
    {
      "key": "dosageForm",
      "type": "select",
      "label": "Dosage Form",
      "options": [
        { "label": "Gel", "value": "gel" },
        { "label": "Cream", "value": "cream" },
        { "label": "Lotion", "value": "lotion" },
        { "label": "Ointment", "value": "ointment" },
        { "label": "Shampoo", "value": "shampoo" },
        { "label": "Foam", "value": "foam" }
      ]
    }
  ],
  "defaultConfig": {
    "inputSource": "manual",
    "desiredEffect": "",
    "targetUser": "18_30",
    "targetMarket": "asia",
    "applicationRoute": "topical",
    "dosageForm": "cream"
  }
}