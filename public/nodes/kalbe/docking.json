{
  "type": "docking",
  "label": "Docking",
  "category": "analysis",
  "icon": "dna",
  "color": "purple",
  "description": "Perform molecular docking for ligands and proteins.",
  "pricing": {
    "credits": 1200,
    "executionTime": 1
  },
  "outputMockLabel": "10000 compounds",
  "outputPageSize": 5,
  "defaultInputs": [
    {
      "id": "compoundList",
      "name": "Compound List",
      "type": "array",
      "required": true,
      "tooltip": "Ligand list including identifiers and file paths for each compound."
    },
    {
      "id": "targetList",
      "name": "Protein Target List",
      "type": "array",
      "required": true,
      "tooltip": "Protein targets with prepared structures and optional grid definitions."
    }
  ],
  "defaultOutputs": [
    {
      "id": "Rank",
      "name": "Rank",
      "type": "number",
      "tooltip": "Rank of the docked compound."
    },
    {
      "id": "Compound Name",
      "name": "Compound Name",
      "type": "string",
      "tooltip": "Name of the compound."
    },
    {
      "id": "SMILES",
      "name": "SMILES",
      "type": "string",
      "tooltip": "SMILES string representing the chemical structure."
    },
    {
      "id": "Docking Score (kcal/mol)",
      "name": "Docking Score (kcal/mol)",
      "type": "number",
      "tooltip": "Predicted binding free energy in kcal/mol."
    },
    {
      "id": "Docked Structure",
      "name": "Docked Structure",
      "type": "structure",
      "tooltip": "3D structure of the docked ligand-protein complex."
    }
  ],
  "configSchema": [
    {
      "key": "smiles_column",
      "type": ["text", "file"],
      "label": "SMILES",
      "tooltip": "Smiles strings of the compounds to be docked",
      "suggestedField": [
        "smiles",
        "SMILES",
        "name",
        "ingredient_name",
        "inci_name"
      ],
      "accept": ".csv,.txt,.smi"
    },
    {
      "key": "protein_column",
      "type": ["text", "file"],
      "label": "Protein 3D structure",
      "tooltip": "3D structure of the proteins to be docked",
      "suggestedField": ["target", "protein_name", "pocket_pdb"],
      "accept": ".csv,.pdb"
    },
    {
      "key": "pocket_selection",
      "type": "multiselect",
      "label": "Pocket Selection",
      "options": [
        {
          "value": "pocket1",
          "label": "Pocket 1"
        },
        {
          "value": "pocket2",
          "label": "Pocket 2"
        },
        {
          "value": "pocket3",
          "label": "Pocket 3"
        },
        {
          "value": "pocket4",
          "label": "Pocket 4"
        },
        {
          "value": "pocket5",
          "label": "Pocket 5"
        },
        {
          "value": "pocket6",
          "label": "Pocket 6"
        },
        {
          "value": "pocket7",
          "label": "Pocket 7"
        },
        {
          "value": "pocket8",
          "label": "Pocket 8"
        },
        {
          "value": "pocket9",
          "label": "Pocket 9"
        },
        {
          "value": "pocket10",
          "label": "Pocket 10"
        }
      ],
      "tooltip": "Select pockets to dock",
      "showWhen": [
        {
          "field": "protein_column",
          "hasValue": true
        }
      ]
    },
    {
      "key": "engine",
      "type": "select",
      "label": "Docking Engine",
      "options": [
        {
          "value": "vina",
          "label": "AutoDock Vina"
        },
        {
          "value": "diffdock",
          "label": "DiffDock"
        },
        {
          "value": "swissdock",
          "label": "SwissDock"
        }
      ],
      "defaultValue": "vina",
      "tooltip": "Select a docking backend:\n- **AutoDock Vina** – accurate classical docking.\n- **DiffDock** – fast ML‑based pose prediction.\n- **SwissDock** – convenient web‑style presets for quick exploration."
    },
    {
      "key": "vina_exhaustiveness",
      "type": "number",
      "label": "Vina Exhaustiveness (Simple)",
      "placeholder": "Docking exhaustiveness (e.g. 8–20)",
      "defaultValue": 8,
      "showWhen": [
        {
          "field": "engine",
          "in": ["vina"]
        }
      ],
      "description": "Simple setting for **AutoDock Vina** controlling search thoroughness. Higher values increase accuracy but take longer."
    },
    {
      "key": "vina_numModes",
      "type": "number",
      "label": "Vina Number of Binding Modes (Advanced)",
      "placeholder": "Number of binding poses to generate",
      "defaultValue": 9,
      "showWhen": [
        {
          "field": "engine",
          "in": ["vina"]
        }
      ],
      "advanced": true,
      "tooltip": "Advanced: number of binding poses Vina should generate per ligand."
    },
    {
      "key": "gridBox",
      "type": "json",
      "label": "Grid Box Definition (Advanced)",
      "placeholder": "{ \"center_x\":0, \"center_y\":0, \"center_z\":0, \"size_x\":20, \"size_y\":20, \"size_z\":20 }",
      "showWhen": [
        {
          "field": "engine",
          "in": ["vina", "swissdock"]
        }
      ],
      "advanced": true,
      "tooltip": "Advanced: JSON definition of the docking search box centre and dimensions (Å)."
    },
    {
      "key": "diffdock_samples",
      "type": "number",
      "label": "DiffDock Samples (Simple)",
      "placeholder": "e.g. 32",
      "defaultValue": 32,
      "showWhen": [
        {
          "field": "engine",
          "in": ["diffdock"]
        }
      ],
      "description": "Simple setting for **DiffDock** controlling how many poses are sampled per complex. More samples = better coverage but slower."
    },
    {
      "key": "diffdock_confidence_threshold",
      "type": "number",
      "label": "DiffDock Confidence Threshold (Advanced)",
      "placeholder": "0.0 – 1.0",
      "defaultValue": 0.5,
      "showWhen": [
        {
          "field": "engine",
          "in": ["diffdock"]
        }
      ],
      "advanced": true,
      "tooltip": "Advanced: minimum DiffDock confidence score to keep a predicted pose."
    },
    {
      "key": "swissdock_run_type",
      "type": "select",
      "label": "SwissDock Run Type (Simple)",
      "options": [
        {
          "value": "quick",
          "label": "Quick – fastest, coarse search"
        },
        {
          "value": "balanced",
          "label": "Balanced – default preset"
        },
        {
          "value": "precise",
          "label": "Precise – slower, higher accuracy"
        }
      ],
      "defaultValue": "balanced",
      "showWhen": [
        {
          "field": "engine",
          "in": ["swissdock"]
        }
      ],
      "description": "Simple preset selector for **SwissDock** controlling the trade-off between speed and accuracy."
    },
    {
      "key": "swissdock_precision",
      "type": "select",
      "label": "SwissDock Advanced Precision",
      "options": [
        {
          "value": "standard",
          "label": "Standard grid"
        },
        {
          "value": "fine",
          "label": "Fine grid (more detailed scoring)"
        }
      ],
      "defaultValue": "standard",
      "showWhen": [
        {
          "field": "engine",
          "in": ["swissdock"]
        }
      ],
      "advanced": true,
      "tooltip": "Advanced: switch between standard and fine‑grid scoring for SwissDock."
    },
    {
      "key": "choose_best_pose",
      "type": "boolean",
      "label": "Choose best pose for each compound?",
      "defaultValue": "true",
      "tooltip": "If checked, the node will select the best pose for each compound based on the docking score."
    },
    {
      "key": "screening",
      "type": "boolean",
      "label": "Screening?",
      "tooltip": "If checked, the node will perform virtual screening."
    },
    {
      "key": "threshold",
      "type": "number",
      "label": "Threshold (kcal/mol)",
      "defaultValue": -5,
      "showWhen": [
        {
          "field": "screening",
          "in": ["true"]
        }
      ],
      "tooltip": "Threshold for virtual screening."
    }
  ]
}
