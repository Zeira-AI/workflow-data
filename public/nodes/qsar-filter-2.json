{
    "type": "qsar-filter-2",
    "label": "QSAR Filter v2",
    "category": "analysis",
    "icon": "filtericon",
    "color": "red",
    "description": "Filter compounds based on QSAR data and physicochemical thresholds.",
    "defaultInputs": [],
    "defaultOutputs": [
        {
            "id": "compound",
            "name": "Compound",
            "type": "string",
            "tooltip": "Compound name"
        }
    ],
    "configSchema": [
        {
            "key": "instructions",
            "type": "markdown",
            "label": "This node filters compounds based on:\n\n- **Relevance**: Match to target criteria\n- **Novelty**: Uniqueness score\n- **Safety**: Toxicity predictions\n\nSelect thresholds below to customize filtering.",
            "color": "info"
        },
        {
            "key": "qsar_models",
            "type": "select",
            "label": "QSAR Models",
            "options": [
                { "value": "chem_prop", "label": "ChemProp - best for fast predictions" },
                { "value": "opera", "label": "OPERA - Regulatory-grade QSAR predictions" },
                { "value": "qsprpred", "label": "QSPRpred - Flexible model building & benchmarking tasks" }
            ],
            "tooltip": "Select the QSAR model to use for the prediction. \n- **ChemProp** is best for fast predictions \n- **OPERA** is regulatory-grade QSAR predictions \n- **QSPRpred** is flexible model building & benchmarking tasks"
        },
        {
            "key": "instructions_chem_prop",
            "type": "markdown",
            "label": "ChemProp is best for fast predictions. Select the prediction endpoint to use for the prediction.",
            "color": "default",
            "showWhen": [
                { "field": "qsar_models", "in": ["chem_prop"] }
            ]
        },
        {
            "key": "instructions_opera",
            "type": "markdown",
            "label": "OPERA is regulatory-grade QSAR predictions. Select the descriptor set to use for the prediction.",
            "showWhen": [
                { "field": "qsar_models", "in": ["opera"] }
            ]
        },
        {
            "key": "prediction_endpoint",
            "type": "select",
            "label": "Prediction Endpoint",
            "showWhen": [
                { "field": "qsar_models", "in": ["chem_prop"] }
            ],
            "options": [
                { "value": "toxicity", "label": "Toxicity" },
                { "value": "solubility", "label": "Solubility" },
                { "value": "bioavailability", "label": "Bioavailability" },
                { "value": "permeability", "label": "Permeability" }
            ]
        },
        {
            "key": "confidence_threshold",
            "type": "number",
            "label": "Confidence Threshold (%)",
            "placeholder": "Enter threshold (0-100)",
            "showWhen": [
                { "field": "qsar_models", "in": ["chem_prop", "opera"] }
            ],
            "defaultValue": 70
        },
        {
            "key": "toxicity_detail",
            "type": "textarea",
            "label": "Toxicity Analysis Notes",
            "placeholder": "Enter specific toxicity parameters or notes...",
            "showWhen": [
                { "field": "qsar_models", "in": ["chem_prop"] },
                { "field": "prediction_endpoint", "in": ["toxicity"] }
            ]
        },
        {
            "key": "opera_descriptor_set",
            "type": "select",
            "label": "OPERA Descriptor Set",
            "showWhen": [
                { "field": "qsar_models", "in": ["opera"] }
            ],
            "options": [
                { "value": "standard", "label": "Standard Descriptors" },
                { "value": "extended", "label": "Extended Descriptors" },
                { "value": "minimal", "label": "Minimal Descriptors" }
            ],
            "defaultValue": "standard",
            "advanced": true
        },
        {
            "key": "qsprpred_training_mode",
            "type": "select",
            "label": "Training Mode",
            "showWhen": [
                { "field": "qsar_models", "in": ["qsprpred"] }
            ],
            "options": [
                { "value": "quick", "label": "Quick Training" },
                { "value": "standard", "label": "Standard Training" },
                { "value": "extensive", "label": "Extensive Training" }
            ],
            "defaultValue": "standard"
        },
        {
            "key": "qsprpred_validation_split",
            "type": "number",
            "label": "Validation Split (%)",
            "placeholder": "Enter percentage (10-50)",
            "showWhen": [
                { "field": "qsar_models", "in": ["qsprpred"] }
            ],
            "defaultValue": 20
        },
        {
            "key": "enable_batch_processing",
            "type": "boolean",
            "label": "Enable Batch Processing",
            "showWhen": [
                { "field": "qsar_models", "in": ["chem_prop", "opera"] }
            ],
            "defaultValue": false,
            "advanced": true
        },
        {
            "key": "batch_size",
            "type": "number",
            "label": "Batch Size",
            "placeholder": "Enter batch size",
            "showWhen": [
                { "field": "qsar_models", "in": ["chem_prop", "opera"] },
                { "field": "enable_batch_processing", "in": ["true"] }
            ],
            "defaultValue": 32,
            "advanced": true
        }
    ]
}